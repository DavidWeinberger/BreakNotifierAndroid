= BreakNotifier

David Weinberger
Arno Blümel
1.0.1, 2020-04-16

:sourcedir: ../src/main/java
ifndef::imagesdir[:imagesdir: images]
ifndef::videosdir[:videasdir: images]
ifndef::backend[:backend: html5]
:icons: font
:toc: left


== Pflichtenheft


=== Ausgangssituation

Die Htl-Leonding hat ca 1000 Schüler und ein sehr großes Schulgebäude. Der Beginn und das Ende jeder einheit wird durch
eine Glocke verwircklicht. Dieses System gibt Schülern und Lehrern die Information, dass eine Pause begonnen hat oder
schon beendet ist.

=== Istzustand

Derzeit ist es nicht gewährleistet, dass jede Klasse diese die Klingel hört. Dies kann zu zwei Problemen führen.
Erstens, der Lehrer könnte die Pause übersehen durcharbeiten, da dieser nicht auf die Pause aufmerksam gemacht wurde.
Dadurch werden Schüler ungeduldig, denn diese wollen zum Wc oder zum Buffet.
Ein zweites großes Problem, ist der Unterrichtsbeginn. Ein Lehrer hat gerade ein Freistunde gehabt, hält sich deswegen
beispielsweise in einem Raum auf, wo man keine Klingel hört. Deswegen kommt diesen 10-20 min zu spät.

=== Problemstellung

Es soll eine kostengünstige Methode entwickelt werden, welche zuverlässig dafür sorgt, dass Lehrer und Schüler auf das
Ende bzw. den Anfang einer Stunde aufmerksam macht. Damit die bereits erwähnten Probleme nicht mehr auftretten.

=== Aufgabenstellung

Da jeder Schüler/Lehrer ein Smartphone besitzt, wird ein App entwickelt. Mittels Webuntis-Account soll man sich eingeloggen
können. Zum Ender jeder einheit bekommt man eine Benachrichtigung. Diese weißt auf das Ende des Unterrichts hin. Am Beginn
des Unterricht erhält man eine Benachrichtigung, diese Enthält folgende Informationen:
* Raum
* Fach
Somit wissen Schüler/Lehrer in welchem Raum Sie sich befinden werden und welches Material diese mitbringen müssen.

== Information vor der Installation

Zur Verwendung dieser App benötigt man einen WebUntis-Zugang der Htl Leonding. Zur einfachen Anwendung, empfehlen wir
den Server nicht selbst aufzusetzen, sondern den Bereits vorhanden Server zu verwenden. Wenn man den Server selbst aufsetzt,
muss man die IP-Adresse in die Config der App eintragen und diese dann neu builden.

== Installation

=== Server
* Folgende Software wird benötigt

. JAVA

. Maven

. Docker
* Github Repository klonen

https://github.com/DavidWeinberger/BreakNotifierAndroid.git

* Wechsel in den geklonten Ordner, dann in das "breakNotifierBackend" Verzeichnis

* Dort Folgende Befehle ausführen:

. mvn package

. docker build -f src/main/docker/Dockerfile.jvm -t quarkus/breaknotifierbackend-jvm .

. docker run -i -d --rm -p 80:13131 quarkus/breaknotifierbackend-jvm

=== App
==== Definition der Server-IP

* Öffnen Sie Android-Studio, anschließend das BreakNotifierLit-Projekt

* Selektieren Sie die String-Resource Datei (res -> values -> strings.xml)

* Ändere den Wert der "Server_Ip"-Variable

* Anschließend Exportieren man die APK (Build -> GenerateSigned Bundle -> APK auswählen -> Anweisungen im Wizard folge leisten)

* Nur noch die Apk auf das Smartphone laden und ausführen

* Abschließen mit dem WebUntis Account einloggen

==== Verwendung des bestehendem Servers

* Download der APK

https://github.com/DavidWeinberger/BreakNotifierAndroid/releases

* Öffnen des Installations-Tools am Smartphone

    Oft genügt ein einfacher Klick auf die Apk, im Datei-Manager.

* Nach der Installation einfach mit dem Webuntis-Account einloggen

== Projekthandbuch

=== System Architektur

image:system.jpg[width=75%]



=== GANTT-Diagramm

==== Server
[plantuml,gantt-server,png]
----
@startuml
[Creating Server] lasts 1 days
[Create Client logic] lasts 5 days
[Create Client logic] starts at [Creating Server]'s end
[Creating Register Endpoint] lasts 3 days
[Creating Register Endpoint] starts at [Create Client logic]'s end
[Creating Dashboard/Testing Endpoint] lasts 1 days
[Creating Dashboard/Testing Endpoint] starts at [Create Client logic]'s end
[Login to Webuntis with Cookie] lasts 4 days
[Login to Webuntis with Cookie] starts at [Creating Register Endpoint]'s end
[Implementing FCM] lasts 10 days
[Implementing FCM] starts at [Login to Webuntis with Cookie]'s end
[Testing Server] lasts 6 days
[Testing Server] starts at [Implementing FCM]'s end
[Prototype completed] happens at [Testing Server]'s end
[Changing WebUntis Login] lasts 2 days
[Changing WebUntis Login] starts at [Testing Server]'s end
[Decrypt/Encrypt Password/User] lasts 3 days
[Decrypt/Encrypt Password/User] starts at [Changing WebUntis Login]'s end
[Testing Server 2] lasts 3 days
[Testing Server 2] starts at [Decrypt/Encrypt Password/User]'s end
[Dockering Server] lasts 1 days
[Dockering Server] starts at [Testing Server 2]'s end
@enduml
----

==== App
[plantuml,gantt-app,png]
----
@startuml
[Creating App] lasts 1 days
[Create UI] lasts 6 days
[Create UI] starts at [Creating App]'s end
[Login to Webuntis to get Cookie] lasts 6 days
[Login to Webuntis to get Cookie] starts at [Create UI]'s end
[Register on Server] lasts 1 days
[Register on Server] starts at [Login to Webuntis to get Cookie]'s end
[Implementing FCM] lasts 1 days
[Implementing FCM] starts at [Register on Server]'s end
[Testing App] lasts 6 days
[Testing App] starts at [Implementing FCM]'s end
[Prototype completed] happens at [Testing App]'s end
[Change login from WebUntis to Backend] lasts 2 days
[Change login from WebUntis to Backend] starts at [Testing App]'s end
[Override Messageprovider] lasts 5 days
[Override Messageprovider] starts at [Change login from WebUntis to Backend]'s end
[Update UI] lasts 3 days
[Update UI] starts at [Override Messageprovider]'s end
[Testing App 2] lasts 5 days
[Testing App 2] starts at [Update UI]'s end
@enduml
----

== Image Video

video::image_video.mp4[width=640, options=autoplay]

== Weitere Dokumente

https://github.com/DavidWeinberger/BreakNotifierAndroid/blob/master/Dokumentation/Rest-Zugriff%20auf%20WebUntis.pdf[Dokumentation des Zugriffes auf Webuntis]

